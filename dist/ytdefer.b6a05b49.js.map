{"version":3,"sources":["ytdefer.js"],"names":["ytdefer_ic_w","ytdefer_ic_h","yt_icon","yt_dark_icon","ytdefer_setup","console","log","d","document","els","getElementsByClassName","i","length","e","ds","getAttribute","alert","w","clientWidth","h","clientHeight","dv","createElement","id","style","width","height","position","onresize","ytdefer_resize","appendChild","im","hasAttribute","alt","title","res","src","objectFit","onclick","gen_ytdefer_clk","bt","backgroundImage","window","btoa","setAttribute","border","backgroundColor","left","top","pointerEvents","onmouseover","gen_mouseover","onmouseout","gen_mouseout","YT","js","type","body","addEventListener","getElementById","ic","el","vid_id","parentNode","player","Player","videoId","events","ev","target","playVideo"],"mappings":"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","file":"ytdefer.b6a05b49.js","sourceRoot":"..","sourcesContent":["// size of youtube icon\nvar ytdefer_ic_w = 73;\nvar ytdefer_ic_h = 52;\n\nvar yt_icon = '<svg height=\"100%\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 68 48\" width=\"100%\"><path class=\"ytp-large-play-button-bg\" d=\"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z\" fill=\"#eb3223\"></path><path d=\"M 45,24 27,14 27,34\" fill=\"#fff\"></path></svg>';\n\nvar yt_dark_icon = '<svg height=\"100%\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 68 48\" width=\"100%\"><path class=\"ytp-large-play-button-bg\" d=\"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z\" fill=\"#212121\" fill-opacity=\"0.8\"></path><path d=\"M 45,24 27,14 27,34\" fill=\"#fff\"></path></svg>';\n\nfunction ytdefer_setup()\n{\n    console.log('hola');\n    var d = document;\n    var els = d.getElementsByClassName('ytdefer');\n    for(var i = 0; i < els.length; i++)\n    {\n        var e = els[i];\n        var ds = e.getAttribute('data-src');\n        if (!ds)\n        {\n            alert(\"data-src missing for video\");\n            return;\n        }\n\n        var w = e.clientWidth;\n        var h = e.clientHeight;\n\n        var dv = d.createElement('div');\n        dv.id = 'ytdefer_vid'+i;\n        dv.style.width = w+'px';\n        dv.style.height = h+'px';\n        dv.style.position = 'relative';\n        dv.onresize = ytdefer_resize;\n        e.appendChild(dv);\n\n        var im = d.createElement('img');\n        if (e.hasAttribute('data-alt'))\n        {\n            var alt = e.getAttribute('data-alt');\n            im.alt = alt;\n        }\n        if (e.hasAttribute('data-title'))\n        {\n            var title = e.getAttribute('data-title');\n            im.title = title;\n        }\n\n        var res = '0';\n        if (w > 480)\n        {\n            res = 'maxresdefault';\n        }\n\n        im.src = 'https://img.youtube.com/vi/'+ds+'/'+res+'.jpg';\n        im.id = 'ytdefer_img'+i;\n        im.style.width = '100%';\n        im.style.height = '100%';\n        im.style.objectFit = 'cover';\n        im.style.position = 'relative';\n        im.onclick = gen_ytdefer_clk(i);\n        dv.appendChild(im);\n        \n        var bt = d.createElement('button');\n        // https://stackoverflow.com/a/25357859/1192732\n        bt.style.backgroundImage = \"url(data:image/svg+xml;base64,\"+window.btoa(yt_dark_icon)+\")\";\n        bt.id = 'ytdefer_icon'+i;\n        bt.setAttribute('aria-label', 'Play');\n        bt.style.position = 'absolute';\n        bt.style.border = '0';\n        bt.style.backgroundColor = 'transparent';\n        bt.style.left = (w/2-ytdefer_ic_w/2)+'px';\n        bt.style.top = (h/2-ytdefer_ic_h/2)+'px';\n        bt.style.width = ytdefer_ic_w+'px';\n        bt.style.height = ytdefer_ic_h+'px';\n        bt.style.pointerEvents = 'none';\n        dv.appendChild(bt);\n\n        im.onmouseover = gen_mouseover(bt);\n        im.onmouseout = gen_mouseout(bt);\n    }\n    if (typeof(YT) == 'undefined')\n    {\n        var js = d.createElement(\"script\");\n        js.type = \"text/javascript\";\n        js.src = \"https://www.youtube.com/player_api\";\n        d.body.appendChild(js);\n    }\n    window.addEventListener('resize', ytdefer_resize);\n}\n\nfunction ytdefer_resize()\n{\n    var d = document;\n    var els = d.getElementsByClassName('ytdefer');\n    for(var i = 0; i < els.length; i++)\n    {\n        var e = els[i];\n        var w = e.clientWidth;\n        var h = e.clientHeight;\n        var dv = d.getElementById('ytdefer_vid'+i);\n        dv.style.width = w+'px';\n        dv.style.height = h+'px';\n        var ic = d.getElementById('ytdefer_icon'+i);\n        if (null != ic)\n        {\n            ic.style.left = (w/2-ytdefer_ic_w/2)+'px';\n            ic.style.top = (h/2-ytdefer_ic_h/2)+'px';\n        }\n    }\n}\n\n//https://stackoverflow.com/a/30152957/1192732\nfunction gen_mouseout(bt)\n{\n    return function()\n    {\n        bt.style.backgroundImage = \"url(data:image/svg+xml;base64,\"+window.btoa(yt_dark_icon)+\")\";\n    }\n}\n\nfunction gen_mouseover(bt)\n{\n    return function()\n    {\n        bt.style.backgroundImage = \"url(data:image/svg+xml;base64,\"+window.btoa(yt_icon)+\")\";\n    }\n}\n\nfunction gen_ytdefer_clk(i)\n{\n    return function()\n    {\n        var d = document;\n        var el = d.getElementById('ytdefer_vid'+i);\n        var vid_id = el.parentNode.getAttribute('data-src');\n        var player = new YT.Player(el.id, \n        {\n            height: el.style.height,\n            width: el.style.width,\n            videoId: vid_id,\n            events: \n            {\n                'onReady': function(ev) { ev.target.playVideo() }\n            }\n        });\n    }\n}\n\nwindow.addEventListener('load', ytdefer_setup);\n"]}