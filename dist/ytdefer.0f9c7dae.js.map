{"version":3,"sources":["ytdefer.js"],"names":["ytdefer_ic_w","ytdefer_ic_h","yt_icon","yt_dark_icon","ytdefer_setup","d","document","els","getElementsByClassName","i","length","e","ds","getAttribute","alert","w","clientWidth","h","clientHeight","dv","createElement","id","style","width","height","position","onresize","ytdefer_resize","appendChild","im","hasAttribute","alt","title","res","src","objectFit","onclick","gen_ytdefer_clk","bt","backgroundImage","window","btoa","setAttribute","border","backgroundColor","left","top","pointerEvents","onmouseover","gen_mouseover","onmouseout","gen_mouseout","YT","js","type","body","addEventListener","getElementById","ic","el","vid_id","parentNode","Player","videoId","events","ev","target","playVideo"],"mappings":"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","file":"ytdefer.0f9c7dae.js","sourceRoot":"..","sourcesContent":["// size of youtube icon\nvar ytdefer_ic_w = 73;\nvar ytdefer_ic_h = 52;\n\nvar yt_icon = '<svg height=\"100%\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 68 48\" width=\"100%\"><path class=\"ytp-large-play-button-bg\" d=\"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z\" fill=\"#eb3223\"></path><path d=\"M 45,24 27,14 27,34\" fill=\"#fff\"></path></svg>';\n\nvar yt_dark_icon = '<svg height=\"100%\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 68 48\" width=\"100%\"><path class=\"ytp-large-play-button-bg\" d=\"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z\" fill=\"#212121\" fill-opacity=\"0.8\"></path><path d=\"M 45,24 27,14 27,34\" fill=\"#fff\"></path></svg>';\n\nfunction ytdefer_setup()\n{\n    var d = document;\n    var els = d.getElementsByClassName('ytdefer');\n    for(var i = 0; i < els.length; i++)\n    {\n        var e = els[i];\n        var ds = e.getAttribute('data-src');\n        if (!ds)\n        {\n            alert(\"data-src missing for video\");\n            return;\n        }\n\n        var w = e.clientWidth;\n        var h = e.clientHeight;\n\n        var dv = d.createElement('div');\n        dv.id = 'ytdefer_vid'+i;\n        dv.style.width = w+'px';\n        dv.style.height = h+'px';\n        dv.style.position = 'relative';\n        dv.onresize = ytdefer_resize;\n        e.appendChild(dv);\n\n        var im = d.createElement('img');\n        if (e.hasAttribute('data-alt'))\n        {\n            var alt = e.getAttribute('data-alt');\n            im.alt = alt;\n        }\n        if (e.hasAttribute('data-title'))\n        {\n            var title = e.getAttribute('data-title');\n            im.title = title;\n        }\n\n        var res = '0';\n        if (w > 480)\n        {\n            res = 'maxresdefault';\n        }\n\n        im.src = 'https://img.youtube.com/vi/'+ds+'/'+res+'.jpg';\n        im.id = 'ytdefer_img'+i;\n        im.style.width = '100%';\n        im.style.height = '100%';\n        im.style.objectFit = 'cover';\n        im.style.position = 'relative';\n        im.onclick = gen_ytdefer_clk(i);\n        dv.appendChild(im);\n        \n        var bt = d.createElement('button');\n        // https://stackoverflow.com/a/25357859/1192732\n        bt.style.backgroundImage = \"url(data:image/svg+xml;base64,\"+window.btoa(yt_dark_icon)+\")\";\n        bt.id = 'ytdefer_icon'+i;\n        bt.setAttribute('aria-label', 'Play');\n        bt.style.position = 'absolute';\n        bt.style.border = '0';\n        bt.style.backgroundColor = 'transparent';\n        bt.style.left = (w/2-ytdefer_ic_w/2)+'px';\n        bt.style.top = (h/2-ytdefer_ic_h/2)+'px';\n        bt.style.width = ytdefer_ic_w+'px';\n        bt.style.height = ytdefer_ic_h+'px';\n        bt.style.pointerEvents = 'none';\n        dv.appendChild(bt);\n\n        im.onmouseover = gen_mouseover(bt);\n        im.onmouseout = gen_mouseout(bt);\n    }\n    if (typeof(YT) == 'undefined')\n    {\n        var js = d.createElement(\"script\");\n        js.type = \"text/javascript\";\n        js.src = \"https://www.youtube.com/player_api\";\n        d.body.appendChild(js);\n    }\n    window.addEventListener('resize', ytdefer_resize);\n}\n\nfunction ytdefer_resize()\n{\n    var d = document;\n    var els = d.getElementsByClassName('ytdefer');\n    for(var i = 0; i < els.length; i++)\n    {\n        var e = els[i];\n        var w = e.clientWidth;\n        var h = e.clientHeight;\n        var dv = d.getElementById('ytdefer_vid'+i);\n        dv.style.width = w+'px';\n        dv.style.height = h+'px';\n        var ic = d.getElementById('ytdefer_icon'+i);\n        if (null != ic)\n        {\n            ic.style.left = (w/2-ytdefer_ic_w/2)+'px';\n            ic.style.top = (h/2-ytdefer_ic_h/2)+'px';\n        }\n    }\n}\n\n//https://stackoverflow.com/a/30152957/1192732\nfunction gen_mouseout(bt)\n{\n    return function()\n    {\n        bt.style.backgroundImage = \"url(data:image/svg+xml;base64,\"+window.btoa(yt_dark_icon)+\")\";\n    }\n}\n\nfunction gen_mouseover(bt)\n{\n    return function()\n    {\n        bt.style.backgroundImage = \"url(data:image/svg+xml;base64,\"+window.btoa(yt_icon)+\")\";\n    }\n}\n\nfunction gen_ytdefer_clk(i)\n{\n    return function()\n    {\n        var d = document;\n        var el = d.getElementById('ytdefer_vid'+i);\n        var vid_id = el.parentNode.getAttribute('data-src');\n        var player = new YT.Player(el.id, \n        {\n            height: el.style.height,\n            width: el.style.width,\n            videoId: vid_id,\n            events: \n            {\n                'onReady': function(ev) { ev.target.playVideo() }\n            }\n        });\n    }\n}\n"]}